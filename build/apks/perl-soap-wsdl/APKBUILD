# Automatically generated by apkbuild-cpan, template 3
# Contributor: 
# Maintainer: Michael Moerz <michael@moerz.co.at>
pkgname=perl-soap-wsdl
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=SOAP-WSDL
pkgver=3.004
pkgrel=0
pkgdesc="SOAP with WSDL support"
url="https://metacpan.org/release/SOAP-WSDL/"
arch="noarch"
license="GPL-1.0-or-later OR Artistic-1.0-Perl"
depends="perl perl-module-build perl-class-std-fast perl-template-toolkit perl-xml-parser perl-libwww perl-class-load perl-uri perl-term-readkey perl-timedate"
makedepends="perl-dev perl-doc"
checkdepends="perl-test-pod-content perl-xml-libxml perl-cgi perl-test-mockobject perl-test-warn perl-moose perl-test-cpan-meta perl-io-stringy perl-test-xml perl-test-class"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/S/SW/SWALTERS/SOAP-WSDL-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="938ba812630de9630a9a725ec39e22f989ca543da84bc0b6dc1711c7761447c52db6b59ab600c6f97f17dfdd18af3f803f1539806b48988115e894a85ad1c402  SOAP-WSDL-3.004.tar.gz"
